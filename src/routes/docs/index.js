import express from "express";
import swaggerUi from "swagger-ui-express"
import projectPackage from '../../../package.json'
import swaggerJsdoc from "swagger-jsdoc";
import path from "path";

export const specs = swaggerJsdoc({
    swaggerDefinition: {
        info: {
            title: 'Test API',
            version: projectPackage.version,
            description: 'Test Express API with autogenerated swagger doc',
        },
    },
    apis: ['../routes/*.js'],
})

/**
 * @param {Express} router
 */
export const useSwagger = (router) => {
    router.use('/api-docs', express.static(path.join(__dirname, 'api-docs')));
    router.get('/api-docs', swaggerUi.setup(specs));
}
